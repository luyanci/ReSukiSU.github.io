<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何为内核集成 ReSukiSU | ReSukiSU</title>
    <meta name="description" content="让SukiSU再次伟大！">
    <meta name="generator" content="VitePress v2.0.0-alpha.16">
    <link rel="preload stylesheet" href="/assets/style.v4rNsJRG.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.B9yKTFMQ.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.BSP2SI97.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CEw9AoTv.js">
    <link rel="modulepreload" href="/assets/zh-Hans_guide_build.md.ChOIfJla.lean.js">
    <link rel="icon" href="/favicon.svg">
    <link rel="preconnect" href="https://s4.zstatic.net/">
    <link rel="stylesheet" href="https://s4.zstatic.net/npm/jetbrains-mono-webfont@latest/jetbrains-mono.css">
    <meta name="google-site-verification" content="PFExExHEiCGSrImS-yWoSnddXHrVHFmejD_kcS1g6AY">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="ReSukiSU, SukiSU, Android, Documentation, Root, Custom ROM, Kernel">
    <meta name="author" content="ReSukiSU Development">
    <meta property="og:title" content="ReSukiSU Documentation">
    <meta property="og:description" content="Make SukiSU Great Again! The official documentation.">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="ReSukiSU">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <script>const load=()=>{import("/pagefind/pagefind.js").then(e=>{window.__pagefind__=e,e.init()}).catch(()=>{})};window.requestIdleCallback?window.requestIdleCallback(load):setTimeout(load,0);</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-29f0b0ce><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-1c725da8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-1c725da8>Skip to content</a><!--]--><!----><header class="VPNav" data-v-29f0b0ce data-v-94e6f758><div class="VPNavBar has-sidebar top" data-v-94e6f758 data-v-ed681e93><div class="wrapper" data-v-ed681e93><div class="container" data-v-ed681e93><div class="title" data-v-ed681e93><div class="VPNavBarTitle has-sidebar" data-v-ed681e93 data-v-0e5a7ea0><a class="title" href="/zh-Hans/" data-v-0e5a7ea0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo-mini.svg" alt data-v-00c553fe><!--]--><span data-v-0e5a7ea0>ReSukiSU</span><!--[--><!--]--></a></div></div><div class="content" data-v-ed681e93><div class="content-body" data-v-ed681e93><!--[--><!--]--><div class="blog-search search" data-pagefind-ignore="all" data-v-ed681e93 data-v-30632472><div class="nav-search-btn-wait" data-v-30632472><span data-v-30632472><svg width="14" height="14" viewBox="0 0 20 20" data-v-30632472><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" data-v-30632472></path></svg></span><span class="search-tip" data-v-30632472>Search</span><span class="metaKey" data-v-30632472> K </span></div><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ed681e93 data-v-d11c747d><span id="main-nav-aria-label" class="visually-hidden" data-v-d11c747d> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh-Hans/" tabindex="0" data-v-d11c747d data-v-ed95bb3b><!--[--><span data-v-ed95bb3b><i class="ri-home-2-fill"></i> 主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh-Hans/guide/install.html" tabindex="0" data-v-d11c747d data-v-ed95bb3b><!--[--><span data-v-ed95bb3b><i class="ri-book-2-fill"></i> 指导</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d11c747d data-v-8d66361c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-8d66361c><span class="text" data-v-8d66361c><!----><span data-v-8d66361c><i class="ri-links-line"></i> 常用链接</span><span class="vpi-chevron-down text-icon" data-v-8d66361c></span></span></button><div class="menu" data-v-8d66361c><div class="VPMenu" data-v-8d66361c data-v-9b0be733><div class="items" data-v-9b0be733><!--[--><!--[--><div class="VPMenuLink" data-v-9b0be733 data-v-33155018><a class="VPLink link vp-external-link-icon" href="https://kernelsu.org/" target="_blank" rel="noreferrer" data-v-33155018><!--[--><span data-v-33155018>KernelSU 文档</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9b0be733 data-v-33155018><a class="VPLink link vp-external-link-icon" href="https://modules.kernelsu.org/" target="_blank" rel="noreferrer" data-v-33155018><!--[--><span data-v-33155018>KernelSU 模块仓库</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-ed681e93 data-v-450eb4fd data-v-8d66361c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="切换语言" data-v-8d66361c><span class="text" data-v-8d66361c><span class="vpi-languages option-icon" data-v-8d66361c></span><!----><span class="vpi-chevron-down text-icon" data-v-8d66361c></span></span></button><div class="menu" data-v-8d66361c><div class="VPMenu" data-v-8d66361c data-v-9b0be733><!----><!--[--><!--[--><div class="items" data-v-450eb4fd><p class="title" data-v-450eb4fd>简体中文</p><!--[--><div class="VPMenuLink" data-v-450eb4fd data-v-33155018><a class="VPLink link" href="/guide/build.html" lang="en" data-v-33155018><!--[--><span data-v-33155018>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-ed681e93 data-v-c1d8f535><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-c1d8f535 data-v-56526ae8 data-v-07de66de><span class="check" data-v-07de66de><span class="icon" data-v-07de66de><!--[--><span class="vpi-sun sun" data-v-56526ae8></span><span class="vpi-moon moon" data-v-56526ae8></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ed681e93 data-v-25d72322 data-v-d47cfabb><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ReSukiSU" aria-label="github" target="_blank" rel="me noopener" data-v-d47cfabb data-v-1245b9df><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/ReSukiSU" aria-label="telegram" target="_blank" rel="me noopener" data-v-d47cfabb data-v-1245b9df><span class="vpi-social-telegram"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ed681e93 data-v-076c956d data-v-8d66361c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8d66361c><span class="vpi-more-horizontal icon" data-v-8d66361c></span></button><div class="menu" data-v-8d66361c><div class="VPMenu" data-v-8d66361c data-v-9b0be733><!----><!--[--><!--[--><div class="group translations" data-v-076c956d><p class="trans-title" data-v-076c956d>简体中文</p><!--[--><div class="VPMenuLink" data-v-076c956d data-v-33155018><a class="VPLink link" href="/guide/build.html" lang="en" data-v-33155018><!--[--><span data-v-33155018>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-076c956d><div class="item appearance" data-v-076c956d><p class="label" data-v-076c956d>外观</p><div class="appearance-action" data-v-076c956d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-076c956d data-v-56526ae8 data-v-07de66de><span class="check" data-v-07de66de><span class="icon" data-v-07de66de><!--[--><span class="vpi-sun sun" data-v-56526ae8></span><span class="vpi-moon moon" data-v-56526ae8></span><!--]--></span></span></button></div></div></div><div class="group" data-v-076c956d><div class="item social-links" data-v-076c956d><div class="VPSocialLinks social-links-list" data-v-076c956d data-v-d47cfabb><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ReSukiSU" aria-label="github" target="_blank" rel="me noopener" data-v-d47cfabb data-v-1245b9df><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://t.me/ReSukiSU" aria-label="telegram" target="_blank" rel="me noopener" data-v-d47cfabb data-v-1245b9df><span class="vpi-social-telegram"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ed681e93 data-v-9f53e0cb><span class="container" data-v-9f53e0cb><span class="top" data-v-9f53e0cb></span><span class="middle" data-v-9f53e0cb></span><span class="bottom" data-v-9f53e0cb></span></span></button></div></div></div></div><div class="divider" data-v-ed681e93><div class="divider-line" data-v-ed681e93></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-29f0b0ce data-v-4759e5d3><div class="container" data-v-4759e5d3><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-4759e5d3><span class="vpi-align-left menu-icon" data-v-4759e5d3></span><span class="menu-text" data-v-4759e5d3>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-4759e5d3 data-v-9d642c80><button data-v-9d642c80>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-29f0b0ce data-v-fc1dc920><div class="curtain" data-v-fc1dc920></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fc1dc920><span class="visually-hidden" id="sidebar-aria-label" data-v-fc1dc920> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-46a469ef><section class="VPSidebarItem level-0 has-active" data-v-46a469ef data-v-9ef782d6><div class="item" role="button" tabindex="0" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><h2 class="text" data-v-9ef782d6>开始使用</h2><!----></div><div class="items" data-v-9ef782d6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9ef782d6 data-v-9ef782d6><div class="item" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><a class="VPLink link link" href="/zh-Hans/guide/install.html" data-v-9ef782d6><!--[--><p class="text" data-v-9ef782d6>安装</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed is-link" data-v-9ef782d6 data-v-9ef782d6><div class="item" tabindex="0" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><a class="VPLink link link" href="/zh-Hans/guide/build.html" data-v-9ef782d6><!--[--><h3 class="text" data-v-9ef782d6>构建内核</h3><!--]--></a><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-9ef782d6><span class="vpi-chevron-right caret-icon" data-v-9ef782d6></span></div></div><div class="items" data-v-9ef782d6><!--[--><div class="VPSidebarItem level-2 is-link" data-v-9ef782d6 data-v-9ef782d6><div class="item" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><a class="VPLink link link" href="/zh-Hans/guide/manual-integrate.html" data-v-9ef782d6><!--[--><p class="text" data-v-9ef782d6>参考钩子</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-9ef782d6 data-v-9ef782d6><div class="item" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><a class="VPLink link link" href="/zh-Hans/guide/faq.html" data-v-9ef782d6><!--[--><p class="text" data-v-9ef782d6>常见问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-46a469ef><section class="VPSidebarItem level-0" data-v-46a469ef data-v-9ef782d6><!----><div class="items" data-v-9ef782d6><!--[--><div class="VPSidebarItem level-1 is-link" data-v-9ef782d6 data-v-9ef782d6><div class="item" data-v-9ef782d6><div class="indicator" data-v-9ef782d6></div><a class="VPLink link link" href="/zh-Hans/guide/introduce.html" data-v-9ef782d6><!--[--><p class="text" data-v-9ef782d6>关于 ReSukiSU</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-29f0b0ce data-v-52c824fd><div class="VPDoc has-sidebar has-aside" data-v-52c824fd data-v-77cabbb2><!--[--><!--]--><div class="container" data-v-77cabbb2><div class="aside" data-v-77cabbb2><div class="aside-curtain" data-v-77cabbb2></div><div class="aside-container" data-v-77cabbb2><div class="aside-content" data-v-77cabbb2><div class="VPDocAside" data-v-77cabbb2 data-v-4579367d><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-4579367d data-v-a64ad6cd><div class="content" data-v-a64ad6cd><div class="outline-marker" data-v-a64ad6cd></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a64ad6cd>本页目录</div><ul class="VPDocOutlineItem root" data-v-a64ad6cd data-v-02e703fa><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-4579367d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-77cabbb2><div class="content-container" data-v-77cabbb2><!--[--><!--]--><main class="main" data-v-77cabbb2><div style="position:relative;" class="vp-doc _zh-Hans_guide_build external-link-icon-enabled" data-v-77cabbb2><div data-pagefind-body="true" data-pagefind-meta="date:1771295867000"><div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /zh-Hans/guide/build.md for this page in Markdown format</div><h1 id="introduction" tabindex="-1">如何为内核集成 ReSukiSU <a class="header-anchor" href="#introduction" aria-label="Permalink to “如何为内核集成 ReSukiSU”">​</a></h1><div class="markdown-copy-buttons" data-v-d484e26c><div class="markdown-copy-buttons-inner" data-v-d484e26c><div class="dropdown-container" data-v-d484e26c><div class="dropdown-trigger" data-v-d484e26c><button class="copy-page" data-v-d484e26c><span class="icon" data-v-d484e26c><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg></span><span class="label" data-v-d484e26c>Copy page</span></button><span class="divider" data-v-d484e26c></span><button class="chevron-wrapper" data-v-d484e26c><span class="icon chevron" data-v-d484e26c><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-chevron-down-icon lucide-chevron-down" viewBox="0 0 24 24"><path d="m6 9 6 6 6-6"/></svg></span></button></div><!----></div><button class="download-btn" data-v-d484e26c><span class="icon" data-v-d484e26c><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-file-down-icon lucide-file-down" viewBox="0 0 24 24"><path d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"/><path d="M14 2v5a1 1 0 0 0 1 1h5m-8 10v-6m-3 3 3 3 3-3"/></svg></span></button></div></div><div class="info custom-block"><p class="custom-block-title">Notes</p><p>这个文档修改自 <a class="VPNolebaseInlinePreviewLink" relative href="https://kernelsu.org" target="_blank" rel="noreferrer" data-v-cc2a96b7><!--[-->KernelSU 官方文档<!--]--><!----></a></p></div><p>ReSukiSU 可以被集成到 GKI / 非 GKI 内核中，现在它<mark>最低支持到内核 4.9 版本</mark>；理论上也可以支持更低的版本。</p><p>由于非 GKI 内核的碎片化<strong>极其严重</strong>，因此通常没有统一的方法来编译它。但你完全可以自己集成 ReSukiSU 然后编译内核使用。</p><p>首先，你必须有能力从你设备的内核源码编译出一个可以开机并且能正常使用的内核，如果内核不开源，这通常难以做到。</p><p>如果你已经做好了上述准备，可以通过这个教程来集成 ReSukiSU 到你的内核之中。</p><h2 id="构建内核" tabindex="-1">构建内核 <a class="header-anchor" href="#构建内核" aria-label="Permalink to “构建内核”">​</a></h2><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>本部分仅适用于 GKI 设备</p></div><h3 id="同步内核源码" tabindex="-1">同步内核源码 <a class="header-anchor" href="#同步内核源码" aria-label="Permalink to “同步内核源码”">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://android.googlesource.com/kernel/manifest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">kernel_manifest.xm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .repo/manifests</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> manifest.xml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync</span></span></code></pre></div><p><code>&lt;kernel_manifest.xml&gt;</code> 是一个可以唯一确定构建的清单文件，您可以使用该清单进行可重新预测的构建。 您应该从 <a class="VPNolebaseInlinePreviewLink" relative href="https://source.android.com/docs/core/architecture/kernel/gki-release-builds" target="_blank" rel="noreferrer" data-v-cc2a96b7><!--[-->通用内核映像 (GKI) 发布构建<!--]--><!----></a> 下载清单文件</p><h3 id="构建" tabindex="-1">构建 <a class="header-anchor" href="#构建" aria-label="Permalink to “构建”">​</a></h3><p>请先查看 <a class="VPNolebaseInlinePreviewLink" relative href="https://source.android.com/docs/setup/build/building-kernels" target="_blank" rel="noreferrer" data-v-cc2a96b7><!--[-->官方文档<!--]--><!----></a>。</p><p>例如，我们需要构建 aarch64 内核镜像：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">LTO</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">thin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BUILD_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">common/build.config.gki.aarch64</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> build/build.sh</span></span></code></pre></div><p>不要忘记添加 <code>LTO=thin</code>, 否则，如果您的计算机内存小于 24GB，构建可能会失败.</p><p>从 Android 13 开始，内核由 <code>bazel</code> 构建:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tools/bazel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --config=fast</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> //common:kernel_aarch64_dist</span></span></code></pre></div><h2 id="使用-resukisu-构建内核" tabindex="-1">使用 ReSukiSU 构建内核 <a class="header-anchor" href="#使用-resukisu-构建内核" aria-label="Permalink to “使用 ReSukiSU 构建内核”">​</a></h2><p>把 ReSukiSU 添加到你的内核源码树，在内核的根目录执行以下命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -LSs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://raw.githubusercontent.com/ReSukiSU/ReSukiSU/main/kernel/setup.sh&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bash</span></span></code></pre></div><h3 id="手动钩子" tabindex="-1">手动钩子 <a class="header-anchor" href="#手动钩子" aria-label="Permalink to “手动钩子”">​</a></h3><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>请注意，某些设备的 defconfig 文件可能在 <code>arch/arm64/configs/设备代号_defconfig</code> 或位于 <code>arch/arm64/configs/vendor/设备代号_defconfig</code>。在您的 defconfig 文件中，将 <code>CONFIG_KSU</code> 设置为 <code>y</code> 以启用 ReSukiSU，或设置为 <code>n</code> 以禁用。比如在某个 defconfig 中： <code>arch/arm64/configs/...</code></p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+# ReSukiSU</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+CONFIG_KSU=y</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+CONFIG_KSU_MANUAL_HOOK=y</span></span></code></pre></div></div><p>然后，将 <a class="VPNolebaseInlinePreviewLink" relative href="./manual-integrate.html" data-v-cc2a96b7><!--[-->ReSukiSU 调用添加到内核源代码<!--]--><!----></a> 中，改完之后重新编译内核即可。</p><h3 id="susfs" tabindex="-1">SUSFS <a class="header-anchor" href="#susfs" aria-label="Permalink to “SUSFS”">​</a></h3><div class="tip custom-block"><p class="custom-block-title custom-block-title-default">TIP</p><p>请注意，某些设备的 defconfig 文件可能在 <code>arch/arm64/configs/设备代号_defconfig</code> 或位于 <code>arch/arm64/configs/vendor/设备代号_defconfig</code>。在您的 defconfig 文件中，将 <code>CONFIG_KSU</code> 设置为 <code>y</code> 以启用 ReSukiSU，或设置为 <code>n</code> 以禁用。比如在某个 defconfig 中： <code>arch/arm64/configs/...</code></p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+# ReSukiSU</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+CONFIG_KSU=y</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+CONFIG_KSU_SUSFS=y</span></span></code></pre></div></div><p>然后，在<a class="VPNolebaseInlinePreviewLink" relative href="https://gitlab.com/simonpunk/susfs4ksu" target="_blank" rel="noreferrer" data-v-cc2a96b7><!--[--> SUSFS 仓库<!--]--><!----></a>中<strong>根据你的内核版本选择分支</strong>并按照指导打<strong>内核侧</strong>补丁，改完之后重新编译内核即可。</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default">WARNING</p><p>NonGKI 的分支处于弃置状态，如果需要使用 SUSFS, 请自行 backport 移植</p></div><!--[--><h2 id="页面历史" data-v-5f669d8d>页面历史 <a class="header-anchor" href="#页面历史" aria-label="Permalink to &#39;页面历史&#39;" data-v-5f669d8d></a></h2><div class="bg-$vp-custom-block-details-bg vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-5f669d8d><label cursor-pointer data-v-5f669d8d><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-5f669d8d><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-5f669d8d><div class="i-octicon:history-16" data-v-5f669d8d></div><span data-v-5f669d8d>最后编辑于 12 天前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-5f669d8d></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-5f669d8d><span class="&lt;sm:hidden" data-v-5f669d8d>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-5f669d8d></svg></span></div></label><div class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" style="display:none;" data-v-5f669d8d><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-a7c6e310></div><div flex gap-1 align-baseline data-v-a7c6e310><a href="https://github.com/ReSukiSU/ReSukiSU.github.io/commit/24e571691c47a4e9ccef0494a966a1c21dae16b6" target="_blank" class="no-icon" data-v-a7c6e310><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-a7c6e310>24e5716</code></a><span data-v-a7c6e310>-</span><span data-v-a7c6e310><span class="text-sm &lt;sm:text-xs" data-v-a7c6e310>docs: add simply SUSFS guide</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-a7c6e310></div><div flex gap-1 align-baseline data-v-a7c6e310><a href="https://github.com/ReSukiSU/ReSukiSU.github.io/commit/c8ad3ec650accfdfef537f5f4865c91a42a57f71" target="_blank" class="no-icon" data-v-a7c6e310><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-a7c6e310>c8ad3ec</code></a><span data-v-a7c6e310>-</span><span data-v-a7c6e310><span class="text-sm &lt;sm:text-xs" data-v-a7c6e310>docs:change build.md (<a class="no-icon" href='https://github.com/ReSukiSU/ReSukiSU.github.io/issues/11'>#11</a>) (<a class="no-icon" href='https://github.com/ReSukiSU/ReSukiSU.github.io/issues/12'>#12</a>)</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-a7c6e310></div><div flex gap-1 align-baseline data-v-a7c6e310><a href="https://github.com/ReSukiSU/ReSukiSU.github.io/commit/5d5595338867f58ea2564ce232a532bb293c8d05" target="_blank" class="no-icon" data-v-a7c6e310><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-a7c6e310>5d55953</code></a><span data-v-a7c6e310>-</span><span data-v-a7c6e310><span class="text-sm &lt;sm:text-xs" data-v-a7c6e310>docs: fix dead link also rename manual hook for zh-hans</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-a7c6e310></div><div flex gap-1 align-baseline data-v-a7c6e310><a href="https://github.com/ReSukiSU/ReSukiSU.github.io/commit/1f138c8098f6a0c94a0c7823a1842d9570388665" target="_blank" class="no-icon" data-v-a7c6e310><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-a7c6e310>1f138c8</code></a><span data-v-a7c6e310>-</span><span data-v-a7c6e310><span class="text-sm &lt;sm:text-xs" data-v-a7c6e310>refine</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-a7c6e310></div><div flex gap-1 align-baseline data-v-a7c6e310><a href="https://github.com/ReSukiSU/ReSukiSU.github.io/commit/4b736dec4f9be5f1b86f5bd00958c2ac5daab3b4" target="_blank" class="no-icon" data-v-a7c6e310><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-a7c6e310>4b736de</code></a><span data-v-a7c6e310>-</span><span data-v-a7c6e310><span class="text-sm &lt;sm:text-xs" data-v-a7c6e310>document(2/?)</span><!----><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-77cabbb2 data-v-09413b6a><!--[--><!--]--><div class="edit-info" data-v-09413b6a><div class="edit-link" data-v-09413b6a><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/ReSukiSU/ReSukiSU.github.io/edit/main/docs/zh-Hans/guide/build.md" target="_blank" rel="noreferrer" data-v-09413b6a><!--[--><span class="vpi-square-pen edit-link-icon" data-v-09413b6a></span> 在 Github 上编辑此页面<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-09413b6a><span class="visually-hidden" id="doc-footer-aria-label" data-v-09413b6a>Pager</span><div class="pager" data-v-09413b6a><a class="VPLink link pager-link prev" href="/zh-Hans/guide/install.html" data-v-09413b6a><!--[--><span class="desc" data-v-09413b6a>上一页</span><span class="title" data-v-09413b6a>安装</span><!--]--></a></div><div class="pager" data-v-09413b6a><a class="VPLink link pager-link next" href="/zh-Hans/guide/manual-integrate.html" data-v-09413b6a><!--[--><span class="desc" data-v-09413b6a>下一页</span><span class="title" data-v-09413b6a>参考钩子</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-29f0b0ce data-v-b7f4d81a><div class="container" data-v-b7f4d81a><p class="message" data-v-b7f4d81a>Documented with by ReSukiSU Development</p><p class="copyright" data-v-b7f4d81a>Copyright © 2025-2026 ReSukiSU, under MIT License</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guide_build.md\":\"XjnIf_q4\",\"guide_faq.md\":\"CSnBa7XN\",\"guide_install.md\":\"BtqRQZNd\",\"guide_introduce.md\":\"CgVv22xj\",\"guide_manual-integrate.md\":\"D4Q4GHUD\",\"index.md\":\"Frx6PhXd\",\"zh-hans_guide_build.md\":\"ChOIfJla\",\"zh-hans_guide_faq.md\":\"CyTEhXS1\",\"zh-hans_guide_install.md\":\"CdTyiibL\",\"zh-hans_guide_introduce.md\":\"CBAhoG50\",\"zh-hans_guide_manual-integrate.md\":\"Cc1nZz4h\",\"zh-hans_index.md\":\"Bn3BR5mO\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"ReSukiSU\",\"description\":\"Make SukiSU Great Again!\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo-mini.svg\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ReSukiSU\"},{\"icon\":\"telegram\",\"link\":\"https://t.me/ReSukiSU\"}],\"footer\":{\"message\":\"Documented with by ReSukiSU Development\",\"copyright\":\"Copyright © 2025-2026 ReSukiSU, under MIT License\"},\"outline\":{\"level\":[2,4]},\"externalLinkIcon\":true},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\",\"themeConfig\":{\"nav\":[{\"text\":\"<i class=\\\"ri-home-2-fill\\\"></i> Home\",\"link\":\"/\"},{\"text\":\"<i class=\\\"ri-book-2-fill\\\"></i> Guide\",\"link\":\"/guide/install\"},{\"text\":\"<i class=\\\"ri-links-line\\\"></i> Links\",\"items\":[{\"text\":\"KernelSU Documentation\",\"link\":\"https://kernelsu.org/\"},{\"text\":\"KernelSU Modules Repository\",\"link\":\"https://modules.kernelsu.org/\"}]}],\"sidebar\":[{\"text\":\"Get started\",\"items\":[{\"text\":\"Install\",\"link\":\"/guide/install\"},{\"text\":\"Building Kernel\",\"link\":\"/guide/build\",\"collapsed\":true,\"items\":[{\"text\":\"Manual Hooks\",\"link\":\"/guide/manual-integrate\"}]},{\"text\":\"FAQ\",\"link\":\"/guide/faq\"}]},{\"text\":\"About ReSukiSU\",\"link\":\"/guide/introduce\"}],\"editLink\":{\"text\":\"Edit page on Github\",\"pattern\":\"https://github.com/ReSukiSU/ReSukiSU.github.io/edit/main/docs/:path\"},\"docFooter\":{\"prev\":\"Previous page\",\"next\":\"Next page\"},\"lastUpdated\":{\"text\":\"Last updated\"},\"returnToTopLabel\":\"Return to top\",\"sidebarMenuLabel\":\"Menu\",\"darkModeSwitchLabel\":\"Appearance\",\"langMenuLabel\":\"Change language\"},\"description\":\"Make SukiSU Great Again!\"},\"zh-Hans\":{\"label\":\"简体中文\",\"lang\":\"zh-CN\",\"themeConfig\":{\"nav\":[{\"text\":\"<i class=\\\"ri-home-2-fill\\\"></i> 主页\",\"link\":\"/zh-Hans/\"},{\"text\":\"<i class=\\\"ri-book-2-fill\\\"></i> 指导\",\"link\":\"/zh-Hans/guide/install\"},{\"text\":\"<i class=\\\"ri-links-line\\\"></i> 常用链接\",\"items\":[{\"text\":\"KernelSU 文档\",\"link\":\"https://kernelsu.org/\"},{\"text\":\"KernelSU 模块仓库\",\"link\":\"https://modules.kernelsu.org/\"}]}],\"sidebar\":[{\"text\":\"开始使用\",\"items\":[{\"text\":\"安装\",\"link\":\"/zh-Hans/guide/install\"},{\"text\":\"构建内核\",\"link\":\"/zh-Hans/guide/build\",\"collapsed\":true,\"items\":[{\"text\":\"参考钩子\",\"link\":\"/zh-Hans/guide/manual-integrate\"}]},{\"text\":\"常见问题\",\"link\":\"/zh-Hans/guide/faq\"}]},{\"text\":\"关于 ReSukiSU\",\"link\":\"/zh-Hans/guide/introduce\"}],\"editLink\":{\"text\":\"在 Github 上编辑此页面\",\"pattern\":\"https://github.com/ReSukiSU/ReSukiSU.github.io/edit/main/docs/:path\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"lastUpdated\":{\"text\":\"最后更新于\"},\"returnToTopLabel\":\"返回顶部\",\"sidebarMenuLabel\":\"菜单\",\"darkModeSwitchLabel\":\"外观\",\"langMenuLabel\":\"切换语言\",\"outline\":{\"label\":\"本页目录\"}},\"description\":\"让SukiSU再次伟大！\"}},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>